<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trefigurer</title>
  <link rel="stylesheet" href="base.css" />
  

<style>
    :root { --sidebar-width: 420px; }
    textarea { width: 100%; }
    .card--settings { gap: 16px; }
    .settings-group { display: grid; gap: 14px; }
    .settings-group--columns { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
    .setting { display: flex; flex-direction: column; gap: 8px; }
    .setting__header { display: flex; align-items: baseline; justify-content: space-between; gap: 12px; font-size: 13px; color: #374151; }
    .setting__header label { font-weight: 600; }
    .setting__label { font-size: 13px; font-weight: 600; color: #374151; }
    .setting__value { font-size: 13px; color: #111827; font-variant-numeric: tabular-nums; }
    .setting__controls { display: flex; gap: 10px; align-items: center; }
    .setting__controls--split { display: grid; grid-template-columns: minmax(0, 1fr) auto; gap: 10px; align-items: start; }
    .setting__controls--color { display: inline-flex; gap: 8px; align-items: center; }
    .setting__hint { font-size: 12px; color: #6b7280; line-height: 1.4; }
    .setting__hint-list { margin: 0; padding-left: 18px; font-size: 12px; color: #6b7280; display: grid; gap: 4px; list-style: disc; }
    .settings-checkboxes { display: grid; gap: 8px; }
    .settings-section {
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      background: #f9fafb;
      padding: 0;
    }
    .settings-section + .settings-section { margin-top: 10px; }
    .settings-section summary {
      list-style: none;
      cursor: pointer;
      padding: 10px 12px;
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .settings-section summary::-webkit-details-marker { display: none; }
    .settings-section summary::after {
      content: '\25BC';
      font-size: 12px;
      color: #6b7280;
      transition: transform .2s ease;
    }
    .settings-section[open] > summary::after { transform: rotate(180deg); }
    .settings-section__content {
      padding: 12px;
      display: grid;
      gap: 12px;
    }
    .setting__details {
      margin-top: 6px;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      background: #f9fafb;
    }
    .setting__details summary {
      list-style: none;
      cursor: pointer;
      padding: 6px 10px;
      margin: 0;
      font-size: 12px;
      font-weight: 600;
      color: #4b5563;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }
    .setting__details summary::-webkit-details-marker { display: none; }
    .setting__details summary::after {
      content: '\25BC';
      font-size: 10px;
      color: #9ca3af;
      transition: transform .2s ease;
    }
    .setting__details[open] > summary::after { transform: rotate(180deg); }
    .setting__details[open] > .setting__hint-list {
      border-top: 1px solid #e5e7eb;
    }
    .setting__details > .setting__hint-list {
      margin: 0;
      padding: 10px 14px 12px 26px;
    }
    .figure-grid {
      --figure-columns: 1;
      display: grid;
      gap: var(--gap);
      grid-template-columns: repeat(var(--figure-columns), minmax(0, 1fr));
      align-items: stretch;
    }
    .figure-grid[data-figures="2"] { --figure-columns: 2; }
    .figure {
      position: relative;
      border-radius: 12px;
      border: 1px solid #eef0f3;
      background: #fdfdfe;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }
    .figure.is-hidden { display: none; }
    .figureCanvas {
      position: relative;
      flex: 0 0 auto;
      min-height: 320px;
      aspect-ratio: 4 / 3;
    }
    .figureCanvas canvas { width: 100%; height: 100%; display: block; }
    @media (max-width: 720px) {
      .grid { grid-template-columns: 1fr; }
      .figure-grid { --figure-columns: 1; }
      .figureCanvas { min-height: 280px; }
    }
    @media (max-width: 640px) {
      .settings-group--columns { grid-template-columns: minmax(0, 1fr); }
      .setting__controls--split { grid-template-columns: minmax(0, 1fr); }
      .setting__controls--split .btn { justify-self: start; }
    }
    .color-input {
      width: 44px;
      height: 28px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      padding: 0;
      background: #fff;
      cursor: pointer;
    }
    .color-input.is-auto {
      opacity: 0.6;
    }
    .range-input {
      width: 100%;
      accent-color: #3b82f6;
    }
    .btn--small {
      padding: 6px 10px;
      font-size: 12px;
    }
    .btn--small:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .checkbox {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #4b5563;
      cursor: pointer;
      user-select: none;
    }
    .checkbox input {
      width: 16px;
      height: 16px;
      accent-color: #3b82f6;
    }
    .checkbox span {
      line-height: 1.3;
    }
    .card--export h2 {
      margin-bottom: 4px;
    }
    .export-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .export-row + .export-row {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid #e5e7eb;
    }
    .export-row__header {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 12px;
      justify-content: space-between;
      align-items: center;
    }
    .export-row__title {
      font-size: 13px;
      font-weight: 600;
      color: #374151;
    }
    .export-buttons {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .export-row.is-hidden {
      display: none;
    }
  </style>
  <link rel="stylesheet" href="split.css" />
</head>
<body>
  <div class="wrap">
    <div class="grid layout--sidebar">
      <div class="card">
        <div id="figureGrid" class="figure-grid" data-figures="1">
          <div class="figure" data-figure-index="0">
            <div class="figureCanvas" id="figure0"></div>
          </div>
          <div class="figure is-hidden" data-figure-index="1">
            <div class="figureCanvas" id="figure1"></div>
          </div>
        </div>
      </div>
      <div class="side">
        <div class="card card--examples">
          <div class="example-description">
            <textarea id="exampleDescription" aria-label="Oppgavetekst (valgfritt)" placeholder="Oppgavetekst (valgfritt)"></textarea>
          </div>
          <div class="toolbar">
            <button id="btnUpdateExample" class="btn" type="button">Oppdater</button>
            <button id="btnSaveExample" class="btn" type="button">Lag nytt</button>
            <button id="btnDeleteExample" class="btn" type="button">Arkiver</button>
          </div>
        </div>
        <div id="exportCard" class="card card--export">
          <h2>Eksporter figurer</h2>
          <div class="export-row" data-export-index="0">
            <div class="export-row__header">
              <span class="export-row__title" data-export-label>Figur 1</span>
              <div class="export-buttons">
                <button class="btn btn--small" type="button" data-export-button data-export-format="png" data-figure-index="0">Last ned PNG</button>
                <button class="btn btn--small" type="button" data-export-button data-export-format="svg" data-figure-index="0">Last ned SVG</button>
              </div>
            </div>
          </div>
          <div class="export-row" data-export-index="1">
            <div class="export-row__header">
              <span class="export-row__title" data-export-label>Figur 2</span>
              <div class="export-buttons">
                <button class="btn btn--small" type="button" data-export-button data-export-format="png" data-figure-index="1">Last ned PNG</button>
                <button class="btn btn--small" type="button" data-export-button data-export-format="svg" data-figure-index="1">Last ned SVG</button>
              </div>
            </div>
          </div>
        </div>
          <div class="card card--settings">
            <div class="setting setting--textarea">
              <label class="setting__label" for="inpSpecs">Skriv fritekst (én figur per linje)</label>
              <div class="setting__controls setting__controls--split">
                <textarea id="inpSpecs" rows="3" spellcheck="false">kjegle radius: r høyde: h</textarea>
                <button id="btnDraw" class="btn" type="button">Tegn</button>
              </div>
              <details class="setting__details">
                <summary>Tips</summary>
                <ul class="setting__hint-list">
                  <li>Bruk ordene <strong>sylinder</strong>, <strong>kjegle</strong>, <strong>prisme</strong>, <strong>trekantet sylinder</strong>, <strong>firkantet sylinder</strong>, <strong>pyramide</strong> eller <strong>kule</strong>.</li>
                  <li>Legg til <strong>radius</strong> og/eller <strong>høyde</strong> i linjen for å vise mål, for eksempel <code>kjegle radius: r høyde: h</code>.</li>
                  <li>Dra i figuren for å rotere. Bruk høyre museknapp (eller to fingre) for å panorere og rullehjul eller pinch for å zoome.</li>
                </ul>
              </details>
            </div>
            <details class="settings-section" open>
              <summary>Visning</summary>
              <div class="settings-section__content">
                <div class="settings-group settings-group--columns">
                  <div class="setting setting--slider">
                    <div class="setting__header">
                      <label for="rngViewRotation">Rotasjon (<span data-view-figure-label>Figur 1</span>)</label>
                      <span id="lblViewRotation" class="setting__value">0°</span>
                    </div>
                    <input id="rngViewRotation" class="range-input" type="range" min="0" max="360" step="1" value="0" />
                    <div class="setting__hint">Juster kameravinkelen horisontalt.</div>
                  </div>
                  <div class="setting setting--slider">
                    <div class="setting__header">
                      <label for="rngViewElevation">Vinkel opp/ned (<span data-view-figure-label>Figur 1</span>)</label>
                      <span id="lblViewElevation" class="setting__value">0°</span>
                    </div>
                    <input id="rngViewElevation" class="range-input" type="range" min="-80" max="80" step="1" value="0" />
                    <div class="setting__hint">Juster kameravinkelen vertikalt.</div>
                  </div>
                  <div class="setting setting--slider">
                    <div class="setting__header">
                      <label for="rngViewZoom">Zoom (<span data-view-figure-label>Figur 1</span>)</label>
                      <span id="lblViewZoom" class="setting__value">100%</span>
                    </div>
                    <input id="rngViewZoom" class="range-input" type="range" min="40" max="250" step="1" value="100" />
                    <div class="setting__hint">100% tilsvarer standardavstanden.</div>
                  </div>
                </div>
              </div>
            </details>
            <details class="settings-section" open>
              <summary>Utseende</summary>
              <div class="settings-section__content">
                <div class="settings-group settings-group--columns">
                  <div class="setting setting--color">
                    <div class="setting__header">
                      <label for="inpColor">Farge</label>
                    </div>
                    <div class="setting__controls setting__controls--color">
                      <input id="inpColor" class="color-input" type="color" value="#3b82f6" aria-label="Velg farge" />
                      <button id="btnResetColor" class="btn btn--small" type="button">Nullstill</button>
                    </div>
                    <div class="setting__hint">Gjelder alle figurer. Nullstill for å bruke standardfargen.</div>
                  </div>
                  <div class="setting setting--slider">
                    <div class="setting__header">
                      <label for="rngTransparency">Gjennomsiktighet</label>
                      <span id="lblTransparency" class="setting__value">0%</span>
                    </div>
                    <input id="rngTransparency" class="range-input" type="range" min="0" max="90" step="5" value="0" />
                    <div class="setting__hint">0% er helt tett, 90% er svært gjennomsiktig.</div>
                  </div>
                </div>
              </div>
            </details>
            <details class="settings-section" open>
              <summary>Oppførsel</summary>
              <div class="settings-section__content">
                <div class="settings-checkboxes">
                  <label class="checkbox">
                    <input id="chkLockRotation" type="checkbox" />
                    <span>Lås rotasjonen</span>
                  </label>
                  <label class="checkbox">
                    <input id="chkFreeFigure" type="checkbox" />
                    <span>Fri figuren</span>
                  </label>
                </div>
              </div>
            </details>
          </div>
      </div>
    </div>
  </div>
  <script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
  <script
    src="vendor/three/examples/js/controls/OrbitControls.js"
    data-orbit-controls
    onload="this.dataset.loaded='true'"
    onerror="this.dataset.loaded='false'"
  ></script>
  <script src="alt-text-ui.js"></script>
  <script src="trefigurer.js"></script>
  <script src="examples.js"></script>
  <script src="split.js"></script>
</body>
</html>
