{"version":3,"file":"index.global.js","sources":["../src/index.js"],"sourcesContent":["const MAX_COLORS = 48;\nconst DEFAULT_PROJECT = 'campus';\n\nconst PROJECT_FALLBACKS = deepFreeze({\n  campus: ['#DBE3FF', '#2C395B', '#E3B660', '#C5E5E9', '#F6E5BC', '#F1D0D9'],\n  annet: ['#FCEDE4', '#355070', '#F3722C', '#43AA8B', '#577590', '#F9C74F'],\n  kikora: ['#FF5C5C', '#FF9F1C', '#2EC4B6', '#3A86FF', '#8338EC', '#FFE066'],\n  default: ['#1F4DE2', '#475569', '#EF4444', '#0EA5E9', '#10B981', '#F59E0B']\n});\n\nconst GRAFTEGNER_AXIS_DEFAULTS = deepFreeze({\n  campus: '#1F4DE2',\n  annet: '#355070',\n  kikora: '#3A86FF',\n  default: '#1F4DE2'\n});\n\nconst RAW_COLOR_SLOT_GROUPS = [\n  {\n    groupId: 'graftegner',\n    title: 'Graftegner',\n    description: 'Standardfarger for nye grafer og koordinatsystem.',\n    slots: [\n      { index: 0, label: 'Graf', description: 'Brukes for grafer og funksjoner.' },\n      { index: 19, label: 'Akser', description: 'Farge for akser og rutenett.' }\n    ]\n  },\n  {\n    groupId: 'nkant',\n    title: 'nKant',\n    description: 'Farger for linjer, vinkler og fyll i nKant.',\n    slots: [\n      { index: 1, label: 'Linje', description: 'Kanter, diagonaler og hjelpelinjer.' },\n      { index: 2, label: 'Vinkel', description: 'Markeringer og vinkelflater.' },\n      { index: 3, label: 'Fyll', description: 'Utfylling av polygonflater.' }\n    ]\n  },\n  {\n    groupId: 'diagram',\n    title: 'Diagram',\n    description: 'Standardfarger for stolpe- og sektordiagram.',\n    slots: [\n      { index: 4, label: 'En stolpe', description: 'Når et stolpediagram har én dataserie.' },\n      { index: 5, label: 'Stolpe1', description: 'Første dataserie i sammenlignende stolpediagram.' },\n      { index: 6, label: 'Stolpe2', description: 'Andre dataserie i sammenlignende stolpediagram.' },\n      { index: 7, label: 'Sektor1', description: 'Første sektor i sektordiagram.' },\n      { index: 8, label: 'Sektor2', description: 'Andre sektor i sektordiagram.' },\n      { index: 9, label: 'Sektor3', description: 'Tredje sektor i sektordiagram.' },\n      { index: 10, label: 'Sektor4', description: 'Fjerde sektor i sektordiagram.' },\n      { index: 11, label: 'Sektor5', description: 'Femte sektor i sektordiagram.' },\n      { index: 12, label: 'Sektor6', description: 'Sjette sektor i sektordiagram.' }\n    ]\n  },\n  {\n    groupId: 'fractions',\n    title: 'Brøk og tenkeblokker',\n    description: 'Farger for linjer og fyll i brøkmodeller og tenkeblokker.',\n    slots: [\n      { index: 13, label: 'Fyll', description: 'Fyllfarge for brøker og tenkeblokker.' },\n      { index: 14, label: 'Linje', description: 'Konturer i brøker og tenkeblokker.' }\n    ]\n  },\n  {\n    groupId: 'figurtall',\n    title: 'Figurtall',\n    description: 'Fire standardfarger for figurer i mønstre.',\n    slots: [\n      { index: 15, label: 'Fyll 1', description: 'Første farge i figurtall.' },\n      { index: 16, label: 'Fyll 2', description: 'Andre farge i figurtall.' },\n      { index: 17, label: 'Fyll 3', description: 'Tredje farge i figurtall.' },\n      { index: 18, label: 'Fyll 4', description: 'Fjerde farge i figurtall.' }\n    ]\n  },\n  {\n    groupId: 'arealmodell',\n    title: 'Arealmodell',\n    description: 'Farger for rutene i arealmodellen.',\n    slots: [\n      { index: 21, label: 'Farge 1', description: 'Første rute i arealmodellen.' },\n      { index: 22, label: 'Farge 2', description: 'Andre rute i arealmodellen.' },\n      { index: 23, label: 'Farge 3', description: 'Tredje rute i arealmodellen.' },\n      { index: 24, label: 'Farge 4', description: 'Fjerde rute i arealmodellen.' }\n    ]\n  },\n  {\n    groupId: 'tallinje',\n    title: 'Tallinje',\n    description: 'Standardfarger for tallinjen.',\n    slots: [\n      { index: 25, label: 'Linje', description: 'Selve tallinjen og markeringer.' },\n      { index: 26, label: 'Fyll', description: 'Utfylling av områder på tallinjen.' }\n    ]\n  },\n  {\n    groupId: 'kvikkbilder',\n    title: 'Kvikkbilder',\n    description: 'Fyllfargen i kvikkbilder.',\n    slots: [{ index: 27, label: 'Fyll', description: 'Brukes på figurer i kvikkbilder.' }]\n  },\n  {\n    groupId: 'trefigurer',\n    title: '3D-figurer',\n    description: 'Standardfarger for romfigurer.',\n    slots: [\n      { index: 28, label: 'Linje', description: 'Kanter og hjelpelinjer i romfigurer.' },\n      { index: 29, label: 'Fyll', description: 'Fyllfarge for romfigurer.' }\n    ]\n  },\n  {\n    groupId: 'brokvegg',\n    title: 'Brøkvegg',\n    description: 'Farger for nivåene i brøkveggen.',\n    slots: [\n      { index: 30, label: 'Fyll 1', description: 'Øverste nivå i brøkveggen.' },\n      { index: 31, label: 'Fyll 2', description: 'Andre nivå i brøkveggen.' },\n      { index: 32, label: 'Fyll 3', description: 'Tredje nivå i brøkveggen.' },\n      { index: 33, label: 'Fyll 4', description: 'Fjerde nivå i brøkveggen.' },\n      { index: 34, label: 'Fyll 5', description: 'Femte nivå i brøkveggen.' },\n      { index: 35, label: 'Fyll 6', description: 'Sjette nivå i brøkveggen.' }\n    ]\n  },\n  {\n    groupId: 'prikktilprikk',\n    title: 'Prikk til prikk',\n    description: 'Farger for punkter og linjer i prikk til prikk.',\n    slots: [\n      { index: 36, label: 'Prikk', description: 'Standardfarge for punktene.' },\n      { index: 37, label: 'Linje', description: 'Linjen som binder punktene sammen.' }\n    ]\n  },\n  {\n    groupId: 'fortegnsskjema',\n    title: 'Fortegnsskjema',\n    description: 'Farger for akse, segmenter og markører i fortegnsskjemaet.',\n    slots: [\n      { index: 38, label: 'Akse', description: 'Koordinataksen og pilen.' },\n      { index: 39, label: 'Hjelpelinjer', description: 'Vertikale hjelpelinjer og bakgrunnsmarkører.' },\n      {\n        index: 40,\n        label: 'Positiv',\n        description: 'Segmenter og markører som viser positivt fortegn.'\n      },\n      {\n        index: 41,\n        label: 'Negativ',\n        description: 'Segmenter og markører som viser negativt fortegn.'\n      },\n      { index: 42, label: 'Tekst', description: 'Etiketter og verdiindikatorer i diagrammet.' }\n    ]\n  },\n  {\n    groupId: 'sortering',\n    title: 'Sortering',\n    description: 'Standardfarger for kortene i sorteringsoppgaven.',\n    slots: [\n      { index: 43, label: 'Bakgrunn', description: 'Bakgrunnsfarge for sorteringskort.' },\n      { index: 44, label: 'Ramme', description: 'Kantlinjen rundt sorteringskort.' },\n      { index: 45, label: 'Tekst', description: 'Tekst og innhold på sorteringskort.' }\n    ]\n  }\n];\n\nfunction deepFreeze(value) {\n  if (!value || typeof value !== 'object') {\n    return value;\n  }\n  Object.getOwnPropertyNames(value).forEach(key => {\n    const property = value[key];\n    if (property && typeof property === 'object' && !Object.isFrozen(property)) {\n      deepFreeze(property);\n    }\n  });\n  return Object.freeze(value);\n}\n\nfunction cloneSlots(slots, groupId) {\n  if (!Array.isArray(slots)) return [];\n  return slots\n    .map((slot, slotIndex) => {\n      const index = Number.isInteger(slot && slot.index) ? Number(slot.index) : slotIndex;\n      return {\n        index: index < 0 ? slotIndex : index,\n        label: slot && slot.label ? String(slot.label) : `Farge ${slotIndex + 1}`,\n        description: slot && slot.description ? String(slot.description) : null,\n        groupId,\n        groupIndex: slotIndex\n      };\n    })\n    .filter(slot => Number.isInteger(slot.index) && slot.index >= 0);\n}\n\nconst COLOR_SLOT_GROUPS = deepFreeze(\n  RAW_COLOR_SLOT_GROUPS.map((group, groupIndex) => {\n    const normalizedId =\n      group && typeof group.groupId === 'string' ? group.groupId.trim().toLowerCase() : `gruppe-${groupIndex + 1}`;\n    const groupId = normalizedId || `gruppe-${groupIndex + 1}`;\n    const slots = cloneSlots(group && group.slots, groupId);\n    return deepFreeze({\n      groupId,\n      title: group && group.title ? String(group.title) : '',\n      description: group && group.description ? String(group.description) : '',\n      slots,\n      groupIndex\n    });\n  })\n);\n\nconst COLOR_GROUP_IDS = COLOR_SLOT_GROUPS.map(group => group.groupId);\nconst GROUP_SLOT_INDICES = {};\nCOLOR_SLOT_GROUPS.forEach(group => {\n  GROUP_SLOT_INDICES[group.groupId] = group.slots.map(slot => slot.index);\n});\nconst MIN_COLOR_SLOTS = COLOR_SLOT_GROUPS.reduce((total, group) => total + group.slots.length, 0);\nconst DEFAULT_GROUP_ORDER = deepFreeze(COLOR_GROUP_IDS.slice());\nconst DEFAULT_PROJECT_ORDER = deepFreeze(['campus', 'kikora', 'annet']);\n\nconst PALETTE_CONFIG = deepFreeze({\n  MAX_COLORS,\n  DEFAULT_PROJECT,\n  PROJECT_FALLBACKS,\n  GRAFTEGNER_AXIS_DEFAULTS,\n  COLOR_SLOT_GROUPS,\n  COLOR_GROUP_IDS,\n  GROUP_SLOT_INDICES,\n  MIN_COLOR_SLOTS,\n  DEFAULT_GROUP_ORDER,\n  DEFAULT_PROJECT_ORDER\n});\n\nfunction normalizeIdentifier(value) {\n  if (typeof value !== 'string') return '';\n  const trimmed = value.trim().toLowerCase();\n  return trimmed || '';\n}\n\nfunction sanitizeColor(value) {\n  if (typeof value !== 'string') return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  const match = /^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.exec(trimmed);\n  if (!match) {\n    return trimmed.startsWith('var(') ? trimmed : null;\n  }\n  let hex = match[1];\n  if (hex.length === 3) {\n    hex = hex\n      .split('')\n      .map(ch => ch + ch)\n      .join('');\n  } else if (hex.length === 4) {\n    hex = hex\n      .split('')\n      .slice(0, 3)\n      .map(ch => ch + ch)\n      .join('');\n  } else if (hex.length === 8) {\n    hex = hex.slice(0, 6);\n  }\n  return `#${hex.toLowerCase()}`;\n}\n\nfunction sanitizePalette(values, limit) {\n  if (!Array.isArray(values)) return [];\n  const sanitized = [];\n  const maxSize = Number.isInteger(limit) && limit > 0 ? limit : undefined;\n  for (const value of values) {\n    const clean = sanitizeColor(value);\n    if (clean) {\n      sanitized.push(clean);\n      if (maxSize && sanitized.length >= maxSize) {\n        break;\n      }\n    }\n  }\n  return sanitized;\n}\n\nfunction ensurePalette(base, fallback, count) {\n  const basePalette = sanitizePalette(base);\n  const fallbackPalette = sanitizePalette(fallback);\n  if (!Number.isFinite(count) || count <= 0) {\n    if (basePalette.length) return basePalette.slice();\n    if (fallbackPalette.length) return fallbackPalette.slice();\n    return basePalette.length ? basePalette.slice() : fallbackPalette.slice();\n  }\n  const size = Math.max(1, Math.trunc(count));\n  const result = [];\n  for (let index = 0; index < size; index += 1) {\n    const primary = basePalette[index];\n    if (typeof primary === 'string' && primary) {\n      result.push(primary);\n      continue;\n    }\n    if (fallbackPalette.length) {\n      const fallbackColor = fallbackPalette[index % fallbackPalette.length];\n      if (typeof fallbackColor === 'string' && fallbackColor) {\n        result.push(fallbackColor);\n        continue;\n      }\n    }\n    if (basePalette.length) {\n      const cycled = basePalette[index % basePalette.length];\n      if (typeof cycled === 'string' && cycled) {\n        result.push(cycled);\n      }\n    }\n  }\n  if (!result.length && fallbackPalette.length) {\n    result.push(fallbackPalette[0]);\n  }\n  return result;\n}\n\nfunction getGlobalScopeCandidates(scope) {\n  const list = [];\n  if (scope && typeof scope === 'object') {\n    list.push(scope);\n  }\n  if (typeof globalThis !== 'undefined') {\n    list.push(globalThis);\n  }\n  if (typeof window !== 'undefined') {\n    list.push(window);\n  }\n  if (typeof global !== 'undefined') {\n    list.push(global);\n  }\n  return list;\n}\n\nfunction defaultGetPaletteApi(scope) {\n  const scopes = getGlobalScopeCandidates(scope);\n  for (const candidate of scopes) {\n    if (!candidate || typeof candidate !== 'object') continue;\n    const api = candidate.MathVisualsPalette;\n    if (api && typeof api.getGroupPalette === 'function') {\n      return api;\n    }\n  }\n  return null;\n}\n\nfunction defaultGetThemeApi(scope) {\n  const scopes = getGlobalScopeCandidates(scope);\n  for (const candidate of scopes) {\n    if (!candidate || typeof candidate !== 'object') continue;\n    const api = candidate.MathVisualsTheme;\n    if (api && typeof api === 'object') {\n      return api;\n    }\n  }\n  return null;\n}\n\nfunction getProjectFallbackPalette(projectName, config = PALETTE_CONFIG) {\n  const projectFallbacks = (config && config.PROJECT_FALLBACKS) || PROJECT_FALLBACKS;\n  const defaultProject = normalizeIdentifier((config && config.DEFAULT_PROJECT) || DEFAULT_PROJECT);\n  const normalized = normalizeIdentifier(projectName);\n  const direct = sanitizePalette(projectFallbacks[normalized]);\n  if (direct.length) return direct;\n  const defaultPalette = sanitizePalette(projectFallbacks[defaultProject]);\n  if (defaultPalette.length) return defaultPalette;\n  const globalDefault = sanitizePalette(projectFallbacks.default);\n  if (globalDefault.length) return globalDefault;\n  return sanitizePalette(PROJECT_FALLBACKS.default);\n}\n\nfunction createPaletteService(options = {}) {\n  const config = options && typeof options === 'object' && options.config ? options.config : PALETTE_CONFIG;\n  const groupIds = Array.isArray(config.COLOR_GROUP_IDS) && config.COLOR_GROUP_IDS.length\n    ? config.COLOR_GROUP_IDS.map(normalizeIdentifier).filter(Boolean)\n    : COLOR_GROUP_IDS.slice();\n  const groupSlotIndexMap = {};\n  const configGroupIndices = config.GROUP_SLOT_INDICES || GROUP_SLOT_INDICES;\n  groupIds.forEach(groupId => {\n    const indices = Array.isArray(configGroupIndices[groupId])\n      ? configGroupIndices[groupId].slice()\n      : Array.isArray(GROUP_SLOT_INDICES[groupId])\n      ? GROUP_SLOT_INDICES[groupId].slice()\n      : [];\n    groupSlotIndexMap[groupId] = indices;\n  });\n  const maxColors = Number.isInteger(config.MAX_COLORS) && config.MAX_COLORS > 0 ? config.MAX_COLORS : MAX_COLORS;\n\n  const normalizedProfiles = new Map();\n  if (options && typeof options.profiles === 'object' && options.profiles) {\n    Object.entries(options.profiles).forEach(([profileKey, profileValue]) => {\n      const normalizedProfileId = normalizeIdentifier(\n        profileValue && typeof profileValue === 'object' && profileValue.id ? profileValue.id : profileKey\n      );\n      if (!normalizedProfileId) return;\n      const groups = {};\n      const rawGroups =\n        profileValue && typeof profileValue === 'object'\n          ? profileValue.groups || profileValue.groupPalettes || {}\n          : {};\n      Object.entries(rawGroups).forEach(([groupKey, colors]) => {\n        const normalizedGroupId = normalizeIdentifier(groupKey);\n        if (!normalizedGroupId || !groupIds.includes(normalizedGroupId)) return;\n        const limit = (groupSlotIndexMap[normalizedGroupId] || []).length || maxColors;\n        const sanitized = sanitizePalette(colors, limit);\n        if (sanitized.length) {\n          groups[normalizedGroupId] = sanitized;\n        }\n      });\n      const palettes = {};\n      const rawPalettes =\n        profileValue && typeof profileValue === 'object'\n          ? profileValue.palettes || profileValue.palette || {}\n          : {};\n      Object.entries(rawPalettes).forEach(([kindKey, colors]) => {\n        const normalizedKind = normalizeIdentifier(kindKey);\n        if (!normalizedKind) return;\n        const sanitized = sanitizePalette(colors, maxColors);\n        if (sanitized.length) {\n          palettes[normalizedKind] = sanitized;\n        }\n      });\n      const fallbacks = {};\n      const rawFallbacks =\n        profileValue && typeof profileValue === 'object'\n          ? profileValue.fallbacks || profileValue.groupFallbacks || {}\n          : {};\n      Object.entries(rawFallbacks).forEach(([groupKey, kinds]) => {\n        const normalizedGroupId = normalizeIdentifier(groupKey) || groupKey;\n        if (!normalizedGroupId) return;\n        const normalizedKinds = Array.isArray(kinds)\n          ? kinds.map(normalizeIdentifier).filter(Boolean)\n          : [];\n        if (normalizedKinds.length) {\n          fallbacks[normalizedGroupId] = normalizedKinds;\n        }\n      });\n      normalizedProfiles.set(normalizedProfileId, {\n        id: profileValue && profileValue.id ? profileValue.id : normalizedProfileId,\n        groups,\n        palettes,\n        fallbacks\n      });\n    });\n  }\n\n  const defaultProfileId = normalizeIdentifier(options && options.defaultProfile ? options.defaultProfile : '');\n  const groupFallbacks = {};\n  if (options && typeof options.groupFallbacks === 'object' && options.groupFallbacks) {\n    Object.entries(options.groupFallbacks).forEach(([groupKey, kinds]) => {\n      const normalizedGroupId = normalizeIdentifier(groupKey) || groupKey;\n      if (!normalizedGroupId) return;\n      const normalizedKinds = Array.isArray(kinds)\n        ? kinds.map(normalizeIdentifier).filter(Boolean)\n        : [];\n      if (normalizedKinds.length) {\n        groupFallbacks[normalizedGroupId] = normalizedKinds;\n      }\n    });\n  }\n\n  const legacyPaletteMap = new Map();\n  let legacyPaletteHandler = null;\n  if (options && options.legacyPalettes) {\n    if (typeof options.legacyPalettes === 'function') {\n      legacyPaletteHandler = options.legacyPalettes;\n    } else if (typeof options.legacyPalettes === 'object') {\n      Object.entries(options.legacyPalettes).forEach(([legacyKey, value]) => {\n        const normalizedLegacyId = normalizeIdentifier(legacyKey);\n        if (!normalizedLegacyId) return;\n        if (typeof value === 'function') {\n          legacyPaletteMap.set(normalizedLegacyId, value);\n          return;\n        }\n        if (Array.isArray(value)) {\n          const sanitized = sanitizePalette(value, maxColors);\n          if (sanitized.length) {\n            legacyPaletteMap.set(normalizedLegacyId, sanitized);\n          }\n          return;\n        }\n        if (value && typeof value === 'object') {\n          const perProfile = {};\n          Object.entries(value).forEach(([profileKey, paletteValues]) => {\n            const normalizedProfileId = normalizeIdentifier(profileKey) || profileKey;\n            const sanitized = sanitizePalette(paletteValues, maxColors);\n            if (sanitized.length) {\n              perProfile[normalizedProfileId] = sanitized;\n            }\n          });\n          if (Object.keys(perProfile).length) {\n            legacyPaletteMap.set(normalizedLegacyId, perProfile);\n          }\n        }\n      });\n    }\n  }\n\n  const paletteApiGetter =\n    typeof options.getPaletteApi === 'function' ? options.getPaletteApi : defaultGetPaletteApi;\n  const themeApiGetter = typeof options.getThemeApi === 'function' ? options.getThemeApi : defaultGetThemeApi;\n\n  function resolveFallbackOrder(groupId, profile, explicitFallbackKinds) {\n    const order = [];\n    const append = list => {\n      if (!Array.isArray(list)) return;\n      list.forEach(kind => {\n        const normalizedKind = normalizeIdentifier(kind);\n        if (!normalizedKind) return;\n        if (!order.includes(normalizedKind)) {\n          order.push(normalizedKind);\n        }\n      });\n    };\n    append(explicitFallbackKinds);\n    if (profile && profile.fallbacks) {\n      append(profile.fallbacks[groupId]);\n      append(profile.fallbacks.default);\n    }\n    append(groupFallbacks[groupId]);\n    append(groupFallbacks.default);\n    return order;\n  }\n\n  function selectProfilePalette(profileId, groupId, fallbackKinds) {\n    const normalizedProfileId = normalizeIdentifier(profileId);\n    if (!normalizedProfileId) return null;\n    const profile = normalizedProfiles.get(normalizedProfileId);\n    if (!profile) return null;\n    const direct = profile.groups[groupId];\n    if (Array.isArray(direct) && direct.length) {\n      return direct.slice();\n    }\n    const fallbackOrder = resolveFallbackOrder(groupId, profile, fallbackKinds);\n    for (const kind of fallbackOrder) {\n      const palette = profile.palettes[kind];\n      if (Array.isArray(palette) && palette.length) {\n        return palette.slice();\n      }\n    }\n    return null;\n  }\n\n  function selectLegacyPalette(legacyId, profileId) {\n    const normalizedLegacyId = normalizeIdentifier(legacyId);\n    if (!normalizedLegacyId) return null;\n    const entry = legacyPaletteMap.get(normalizedLegacyId);\n    if (!entry) return null;\n    if (typeof entry === 'function') {\n      try {\n        const result = entry({ legacyId: normalizedLegacyId, profile: profileId });\n        const sanitized = sanitizePalette(result, maxColors);\n        if (sanitized.length) {\n          return sanitized;\n        }\n      } catch (_) {}\n      return null;\n    }\n    if (Array.isArray(entry)) {\n      return entry.slice();\n    }\n    if (entry && typeof entry === 'object') {\n      const normalizedProfileId = normalizeIdentifier(profileId);\n      if (normalizedProfileId && Array.isArray(entry[normalizedProfileId]) && entry[normalizedProfileId].length) {\n        return entry[normalizedProfileId].slice();\n      }\n      if (Array.isArray(entry.default) && entry.default.length) {\n        return entry.default.slice();\n      }\n      if (Array.isArray(entry['']) && entry[''].length) {\n        return entry[''].slice();\n      }\n    }\n    return null;\n  }\n\n  function resolveGroupPalette(options = {}) {\n    const opts = options && typeof options === 'object' ? options : {};\n    const groupId = normalizeIdentifier(opts.groupId || opts.group);\n    const count = Number.isFinite(opts.count) && opts.count > 0 ? Math.trunc(opts.count) : undefined;\n    const project = typeof opts.project === 'string' && opts.project ? opts.project : undefined;\n    const explicitFallback = Array.isArray(opts.fallback) ? sanitizePalette(opts.fallback, count || maxColors) : [];\n    let fallbackPalette = explicitFallback;\n    if (!fallbackPalette.length) {\n      fallbackPalette = getProjectFallbackPalette(project, config);\n    }\n    if (!fallbackPalette.length) {\n      fallbackPalette = getProjectFallbackPalette(config.DEFAULT_PROJECT, config);\n    }\n    if (!fallbackPalette.length) {\n      fallbackPalette = sanitizePalette(PROJECT_FALLBACKS.default, maxColors);\n    }\n\n    if (!groupId) {\n      return ensurePalette([], fallbackPalette, count);\n    }\n\n    const scope = opts.scope;\n    const paletteApi = opts.paletteApi || paletteApiGetter(scope);\n    const themeApi = opts.themeApi || themeApiGetter(scope);\n    const requestedProfile = opts.profile === null ? '' : normalizeIdentifier(opts.profile);\n    const profileId = requestedProfile || defaultProfileId;\n    const fallbackKinds = Array.isArray(opts.fallbackKinds)\n      ? opts.fallbackKinds.map(normalizeIdentifier).filter(Boolean)\n      : undefined;\n\n    if (paletteApi && typeof paletteApi.getGroupPalette === 'function') {\n      try {\n        const palette = paletteApi.getGroupPalette(groupId, {\n          count,\n          project,\n          settings: opts.settings\n        });\n        if (Array.isArray(palette) && palette.length) {\n          return ensurePalette(palette, fallbackPalette, count);\n        }\n      } catch (_) {}\n    }\n\n    if (themeApi && typeof themeApi.getGroupPalette === 'function') {\n      try {\n        const palette = themeApi.getGroupPalette(groupId, count, project ? { project } : undefined);\n        if (Array.isArray(palette) && palette.length) {\n          return ensurePalette(palette, fallbackPalette, count);\n        }\n      } catch (_) {}\n    }\n\n    let profilePalette = null;\n    if (profileId) {\n      profilePalette = selectProfilePalette(profileId, groupId, fallbackKinds);\n    }\n    if (!profilePalette && requestedProfile && defaultProfileId && requestedProfile !== defaultProfileId) {\n      profilePalette = selectProfilePalette(defaultProfileId, groupId, fallbackKinds);\n    }\n    if (!profilePalette && !requestedProfile && defaultProfileId) {\n      profilePalette = selectProfilePalette(defaultProfileId, groupId, fallbackKinds);\n    }\n    if (profilePalette && profilePalette.length) {\n      return ensurePalette(profilePalette, fallbackPalette, count);\n    }\n\n    const legacyId = normalizeIdentifier(opts.legacyPaletteId);\n    if (legacyId) {\n      if (themeApi && typeof themeApi.getPalette === 'function') {\n        try {\n          const palette = themeApi.getPalette(legacyId, count, {\n            fallbackKinds,\n            project\n          });\n          if (Array.isArray(palette) && palette.length) {\n            return ensurePalette(palette, fallbackPalette, count);\n          }\n        } catch (_) {}\n      }\n      const legacyPalette = selectLegacyPalette(legacyId, profileId || defaultProfileId || '');\n      if (legacyPalette && legacyPalette.length) {\n        return ensurePalette(legacyPalette, fallbackPalette, count);\n      }\n      if (legacyPaletteHandler) {\n        try {\n          const result = legacyPaletteHandler(legacyId, {\n            profile: profileId || defaultProfileId || null,\n            count,\n            project,\n            fallbackKinds\n          });\n          const sanitized = sanitizePalette(result, count || maxColors);\n          if (sanitized.length) {\n            return ensurePalette(sanitized, fallbackPalette, count);\n          }\n        } catch (_) {}\n      }\n    }\n\n    return ensurePalette([], fallbackPalette, count);\n  }\n\n  return {\n    config,\n    ensurePalette: (base, fallback, count) => ensurePalette(base, fallback, count),\n    resolveGroupPalette,\n    getGroupPalette: (groupId, opts = {}) =>\n      resolveGroupPalette(Object.assign({}, opts, { groupId })),\n    getProjectFallbackPalette: projectName => getProjectFallbackPalette(projectName, config),\n    getProfilePalette(profileId, groupId, opts = {}) {\n      const fallbackKinds = Array.isArray(opts.fallbackKinds)\n        ? opts.fallbackKinds.map(normalizeIdentifier).filter(Boolean)\n        : undefined;\n      const palette = selectProfilePalette(profileId, normalizeIdentifier(groupId), fallbackKinds);\n      return Array.isArray(palette) ? palette.slice() : [];\n    }\n  };\n}\n\nconst defaultPaletteService = createPaletteService();\n\nfunction resolveGroupPalette(options) {\n  return defaultPaletteService.resolveGroupPalette(options);\n}\n\nexport {\n  PROJECT_FALLBACKS,\n  GRAFTEGNER_AXIS_DEFAULTS,\n  COLOR_SLOT_GROUPS,\n  COLOR_GROUP_IDS,\n  GROUP_SLOT_INDICES,\n  MIN_COLOR_SLOTS,\n  DEFAULT_GROUP_ORDER,\n  DEFAULT_PROJECT_ORDER,\n  PALETTE_CONFIG,\n  ensurePalette,\n  getProjectFallbackPalette,\n  createPaletteService,\n  resolveGroupPalette\n};\n\nexport default {\n  PROJECT_FALLBACKS,\n  GRAFTEGNER_AXIS_DEFAULTS,\n  COLOR_SLOT_GROUPS,\n  COLOR_GROUP_IDS,\n  GROUP_SLOT_INDICES,\n  MIN_COLOR_SLOTS,\n  DEFAULT_GROUP_ORDER,\n  DEFAULT_PROJECT_ORDER,\n  PALETTE_CONFIG,\n  ensurePalette,\n  getProjectFallbackPalette,\n  createPaletteService,\n  resolveGroupPalette\n};\n"],"names":[],"mappings":"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"}